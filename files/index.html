<!DOCTYPE HTML>
<html>
   <head>
         <title>Monitor</title>
      <script src="./socket.io.js"></script>
<script>
    var socket = io.connect("http://127.0.0.1:8080/");
socket.on("connect", function () {
    console.log("Connected!");
});



</script>
        

       
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>
    body {
        text-align: center;
    }

    #g1,
    #g2,
    #g3 {
        width: 500px;
        height: 360px;
        display: inline-block;
        margin: 1em;
    }

    p {
        display: block;
        width: 450px;
        margin: 2em auto;
        text-align: left;
    }
    </style>


   </head>
   <body>
     <div id="g1"></div>
      <div id="g2"></div>
    
    <script src="./raphael-2.1.4.min.js"></script>
    <script src="./justgage-1.1.0.min.js"></script>
    <script>
    var g1, g2;
 var msgtopic=0;
 var msgtopic1=0;
 var type;


    document.addEventListener("DOMContentLoaded", function(event) {
        var g1 = new JustGage({
            id: "g1",
            value: msgtopic,
            min: 0,
            max: 100,
            title: "Temperatura",
            label: "Grados"
        });


        var g2 = new JustGage({
            id: "g2",
            value: msgtopic1,
            min: 0,
            max: 100,
            title: "Humedad Relativa",
            label: ""
        });

socket.on('message', function(data){
console.log(data.payload);

if(data.type=="temp"){

    msgtopic=parseInt(data.payload);
    g1.refresh(msgtopic);
}

if(data.type=="hum"){

    msgtopic1=parseInt(data.payload);
    g2.refresh(msgtopic1);
}

    });




    });




    </script>
   </body>
</html>