
<script src="js/colpick.js" type="text/javascript"></script>
<link rel="stylesheet" href="css/colpick.css" type="text/css"/>


<script type="text/javascript">

    RED.nodes.registerType('rgb-sensor',{
        category: 'function',
        color: '#E49A9A',
        defaults: {
            sid: {value:""},
            f1: {value:""},
            f2: {value:""},
            f3: {value:""},
            rgbr: {value:""},
            rgbg: {value:""}, 
            rgbb: {value:""},
        },
        inputs:0,
        outputs:1,
        icon: "rgb.png",
        label: function() {
           return this.sid||this.f1||this.f2||this.f3||this.rgbr||this.rgbg||this.rgbb||"rgb-sensor";
        }
    });
</script>

 

<script type="text/x-red" data-template-name="rgb-sensor">



    <div class="form-row">

<p>ID sensor: </p>
<input type="text" id="node-input-sid" placeholder="ID unico del sensor" name="node-input-sid">

<p></p>
  <label for="node-input-f1">Operaci√≥n</label>
        <select id="node-input-f1" style="width:125px !important" name="node-input-f1">
            <option value="1">STATIC</option>
            <option value="2">FADE</option>
            <option value="3">BLINK</option> 
        </select>



<p>Tiempo encendido: </p>
<input type="text" id="node-input-f2" placeholder="Inserte valor en milisegundos" disabled name="node-input-f2">

<p>Tiempo apagado: </p>
<input type="text" id="node-input-f3" placeholder="Inserte valor en milisegundos" disabled name="node-input-f3">


<p></p>
<p>Selecciona un color:</p>
<div id="picker"></div>




<input type="hidden" id="node-input-rgbr" value="">
<input type="hidden" id="node-input-rgbg" value="">
<input type="hidden" id="node-input-rgbb" value="">

<script type="text/javascript">

//var foo = "some value";
// document.getElementById("foo").innerHTML = foo;

document.getElementById('node-input-f1').onchange = function () {
    document.getElementById("node-input-f2").disabled = this.value == '1' || this.value == '2';
    document.getElementById("node-input-f3").disabled = this.value == '1' || this.value == '2';
}



$('#picker').colpick({
    flat:true,
    layout:'rgbhex',
    submit:0,
    onChange: function(hsb,hex,rgb,el,bySetColor) {
        //document.getElementById("foo").innerHTML = hex;
 
        var rgbr = rgb.r;
        var rgbg = rgb.g;
        var rgbb = rgb.b;

        $("#node-input-rgbr").val(rgbr);
        $("#node-input-rgbg").val(rgbg);
        $("#node-input-rgbb").val(rgbb);




    }
});


</script>

    </div>
</script>



<script type="text/x-red" data-help-name="rgb-sensor">
    <p>Comparacion</p>
</script>

